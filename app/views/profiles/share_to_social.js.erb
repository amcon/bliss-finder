// console.log("working... <%= @social_network %> <%= @response %> <%= @response_image %> ");
// alert("sharing to <%= @social_network %> was a <%= @response %>");
<% if @social_network.eql?("twitter") %>
	console.log("sending to twitter");
	window.open('http://twitter.com/share?url='+encodeURIComponent("<%=request.base_url%>/profiles/<%= @profile.id %>")+'&text='+encodeURIComponent("I Need a New Boyfriend..."), '', 'left=0,top=0,width=550,height=450,personalbar=0,toolbar=0,scrollbars=0,resizable=0');
	// window.open("https://twitter.com/intent/tweet?url=https://www.bliss-finder.com&text=Hello%20world")
<% elsif @social_network.eql?("instagram") %>
	console.log("sending to instagram");
	// const response = await <%= @response_image %>;
	// const blob = await response.blob();
	// const shareImageAsset = async (): Promise<boolean> => {
	// 	const filesArray = [
	// 		new File([blob], "<%= @response_image %>", {
	// 			type: 'image/png',
	// 			lastModified: new Date().getTime(),
	// 		}),
	// 	];
	// 	const shareData = {
	// 		title: "Bliss-Finder.com",
	// 		files: filesArray,
	// 	};

	// 	if (navigator.canShare && navigator.canShare(shareData)) {
	// 		await navigator.share(shareData);
	// 	}
	// };

	const profile_image = "<%= @response_image %>";

	const shareData = {
		title: "Bliss-Finder.com",
		files: profile_image,
	};

	const resultPara = document.querySelector(".result");

	console.log(shareData, resultPara);

	async function asyncCall() {
		if (!navigator.canShare) {
			resultPara.textContent = "Your browser doesn't support the Web Share API.";
			return;
		}
		if (navigator.canShare({ profile_image })) {
			try {
				await navigator.share(shareData);
				resultPara.textContent = "Profile shared successfully";
			} catch (err) {
				resultPara.textContent = `Error: ${err}`;
			}
		} else {
			resultPara.textContent = "Your system doesn't support sharing these files.";
			return;
		}
	}

	asyncCall();
<% end %>
